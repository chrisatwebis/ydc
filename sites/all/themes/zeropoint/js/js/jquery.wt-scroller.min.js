(function(c){var o="top";var i="bottom";var l="outside";var f="inside";var u=0.8;var n=1000;var a=600;var m=300;var k=4000;var e=50;var v="update_buttons";var q="update_thumb";var g="update_index";var d="update_text";var j="start_timer";var t="lightbox_open";var r="lightbox_close";function p(x,w){this._numDisplay=b(w.num_display,3);this._slideWidth=b(w.slide_width,300);this._slideHeight=b(w.slide_height,200);this._slideMargin=s(w.slide_margin,1);this._margin=s(w.margin,10);this._buttonWidth=b(w.button_width,35);this._ctrlHeight=b(w.ctrl_height,20);this._autoScroll=w.auto_scroll;this._delay=b(w.delay,k);this._duration=b(w.scroll_speed,n);this._easing=w.easing;this._autoScale=w.auto_scale;this._displayButtons=w.display_buttons;this._mouseoverButtons=window.Touch?false:w.mouseover_buttons;this._ctrlType=w.ctrl_type.toLowerCase();this._displayCaption=w.display_caption;this._mouseoverCaption=window.Touch?false:w.mouseover_caption;this._captionPos=w.caption_position.toLowerCase();this._captionAlign=w.caption_align.toLowerCase();this._moveBy1=w.move_one;this._contNav=w.cont_nav;this._shuffle=w.shuffle;this._mousewheelScroll=w.mousewheel_scroll;this._playOnce=w.play_once;this._captionEffect=w.caption_effect.toLowerCase();this._$scroller;this._$slidePanel;this._$slideList;this._$slides;this._$prevBtn;this._$nextBtn;this._$cbar;this._$indexes;this._$scrollbar;this._$thumb;this._numItems;this._unitSize;this._prevSlots;this._nextSlots;this._maxSlots;this._range;this._pos;this._timerId;this._extOffset;this._extHeight;this._prevPct;this._slideCoord;this._$obj=x;this.init()}p.prototype.init=function(){this._$scroller=c(".wt-scroller",this._$obj);this._$slidePanel=this._$scroller.find(">.slides");this._$slideList=this._$slidePanel.find(">ul:first");this._$slides=this._$slideList.find(">li");this._$cbar=this._$scroller.find(">.lower-panel");this._$prevBtn=this._$scroller.find(">.prev-btn");this._$nextBtn=this._$scroller.find(">.next-btn");this._extOffset=0;this._extHeight=0;this._pos=0;this._prevPct=-1;this._timerId=null;this._numItems=this._$slides.size();if(this._numItems<=this._numDisplay){this._displayButtons=false;this._ctrlType="none";this._numDisplay=this._numItems}if(this._ctrlType=="index"){this._moveBy1=false}if(this._shuffle){this.shuffleItems()}this.initItems();this.initSlidePanel();this.initCtrls();this._$scroller.css({width:this._$slidePanel.width()+this._$prevBtn.outerWidth(true)+this._$nextBtn.outerWidth(true),height:this._$slidePanel.height()+this._$cbar.outerHeight(),paddingTop:this._margin});this.updateCPanel();if(window.Touch){this._slideCoord={start:-1,end:-1};this._$slidePanel.bind("touchstart",{elem:this},this.touchStart).bind("touchmove",{elem:this},this.touchMove).bind("touchend",{elem:this},this.touchEnd)}else{if(this._mousewheelScroll){this._$scroller.bind("mousewheel",{elem:this},this.scrollContent).bind("DOMMouseScroll",{elem:this},this.scrollContent)}}c(document).bind(r,{elem:this},this.onFocus).bind(t,{elem:this},this.onBlur);this._$scroller.trigger(r)};p.prototype.initItems=function(){this.initCaptions();for(var y=0;y<this._numItems;y++){var z=this._$slides.eq(y);var x;var w=z.find(">a:first");if(w.size()==0){z.click(h);w.css("cursor","default");x=z.find(">img")}else{w.data("text",z.find(">p:first").html());x=w.find(">img")}if(x.size()>0){if(x[0].complete||x[0].readyState=="complete"){this.processImg(x)}else{x.bind("load",{elem:this},this.processLoadedImg)}}if(this._displayCaption&&this._captionPos==f){this.initCaption(z)}}};p.prototype.initCaptions=function(){var w=this._$slides.find(">p:first");if(this._displayCaption){var z=w.outerWidth()-w.width();w.css({width:this._slideWidth-z,visibility:"visible"}).click(h);if(this._captionPos==l){var y=w.map(function(){return c(this).height()}).get();var x=Math.max.apply(Math,y);w.css({top:this._captionAlign==o?0:this._slideHeight,height:x});this._extHeight=w.outerHeight();if(this._captionAlign==o){this._extOffset=this._extHeight}w.addClass("outside")}else{if(jQuery.browser.msie&&parseInt(jQuery.browser.version)>6&&parseInt(jQuery.browser.version)<9){w.addClass("ie-inside")}else{w.addClass("inside")}}}else{w.hide()}};p.prototype.initCaption=function(w){var x=w.find(">p:first");if(x.size()==0||x.html()==""){x.remove();return}x.css("top",this._captionAlign==o?0:this._slideHeight-x.outerHeight());if(this._mouseoverCaption){switch(this._captionEffect){case"slide":x.css("top",this._captionAlign==o?-x.outerHeight():this._slideHeight);w.bind("mouseenter",{elem:this},this.slideInCaption).bind("mouseleave",{elem:this},this.slideOutCaption);break;case"fade":x.css("opacity",0);w.bind("mouseenter",{elem:this},this.fadeInCaption).bind("mouseleave",{elem:this},this.fadeOutCaption);break;default:x.css("visibility","hidden");w.bind("mouseenter",this.showCaption).bind("mouseleave",this.hideCaption)}}};p.prototype.initSlidePanel=function(){this._$slides.css({width:this._slideWidth,height:this._slideHeight+this._extHeight,marginRight:this._slideMargin}).bind("mouseenter",{elem:this},this.itemMouseover).bind("mouseleave",{elem:this},this.itemMouseout);this._$slidePanel.css({width:(this._numDisplay*this._$slides.width())+((this._numDisplay-1)*this._slideMargin),height:this._$slides.height()});this._unitSize=this._$slides.outerWidth(true);var w=(this._ctrlType=="index")?(this._numDisplay*Math.ceil(this._numItems/this._numDisplay)):this._numItems;this._$slideList.width(w*this._unitSize);this._maxSlots=w-this._numDisplay;this._prevSlots=0;this._nextSlots=this._maxSlots;this._range=((this._$slideList.width()-this._slideMargin)-this._$slidePanel.width())};p.prototype.initCtrls=function(){this.initButtons();this._$cbar.css({width:this._$slidePanel.width(),paddingLeft:this._$prevBtn.outerWidth(true),paddingRight:this._$nextBtn.outerWidth(true)});switch(this._ctrlType){case"scrollbar":this.initScrollbar();var w=Math.max((this._ctrlHeight-this._$scrollbar.height())/2,0);this._$cbar.css({paddingTop:w,paddingBottom:w});break;case"index":this.initIndexes();var w=Math.max((this._ctrlHeight-this._$indexes.height())/2,0);this._$cbar.css({paddingTop:w,paddingBottom:w});break;default:this._$cbar.remove();this._$scroller.css("paddingBottom",this._margin)}};p.prototype.initButtons=function(){if(this._displayButtons){if(this._mouseoverButtons){this.removeButtons();this._$slidePanel.append("<div class='m-prev'>&laquo;</div><div class='m-next'>&raquo;</div>");var z=this._$slidePanel.find(">.m-prev").mousedown(h).bind("click",{elem:this},this.moveBack);var y=this._$slidePanel.find(">.m-next").mousedown(h).bind("click",{elem:this},this.moveFwd);if(!window.Touch){z.css("left",-z.width());y.css("marginLeft",0);this._$slidePanel.hover(function(){z.stop(true).animate({left:0},m);y.stop(true).animate({marginLeft:-y.width()},m)},function(){z.stop(true).animate({left:-z.width()},m);y.stop(true).animate({marginLeft:0},m)})}if(!this._contNav){this._$scroller.bind(v,{elem:this,prevBtn:z,nextBtn:y},this.updateButtons)}}else{var w=Math.max(Math.round((this._buttonWidth-this._$prevBtn.width())/2),0);var x=Math.max(this._buttonWidth-w-this._$prevBtn.width(),0);this._$prevBtn.css({marginLeft:w,marginRight:x,height:this._$slidePanel.height()}).mousedown(h).bind("click",{elem:this},this.moveBack);this._$nextBtn.css({marginLeft:x,marginRight:w,height:this._$slidePanel.height()}).mousedown(h).bind("click",{elem:this},this.moveFwd);if(!this._contNav){this._$scroller.bind(v,{elem:this,prevBtn:this._$prevBtn,nextBtn:this._$nextBtn},this.updateButtons)}}}else{this.removeButtons()}};p.prototype.removeButtons=function(){this._$prevBtn.remove();this._$nextBtn.remove();this._$scroller.css({paddingLeft:this._margin,paddingRight:this._margin})};p.prototype.updateButtons=function(z){var x=z.data.elem;var w=Math.abs(x._pos/x._unitSize);var y=w+x._numDisplay;z.data.prevBtn.toggleClass("off",w<=0);z.data.nextBtn.toggleClass("off",y>=x._numItems)};p.prototype.initScrollbar=function(){var y=this;this._$cbar.append("<div class='scroll-bar'><div class='thumb'></div></div>");this._$scrollbar=this._$cbar.find(">.scroll-bar");this._$thumb=this._$scrollbar.find(">.thumb");this._$scrollbar.width(this._$cbar.width()).bind("click",{elem:this},this.trackClick).mousedown(h);this._$thumb.width(Math.ceil((this._numDisplay/this._numItems)*this._$scrollbar.width())).click(h);var w=this._$scrollbar.width()-this._$thumb.width();var z=this._range/w;try{this._$thumb.draggable({containment:"parent"}).bind("drag",function(){y._$slideList.css({left:Math.round(-y._$thumb.position().left*z)})}).bind("dragstop",function(){y.autoStop(y._$thumb.position().left/w)})}catch(x){}this._$scroller.bind(q,function(){var A=Math.round(Math.abs(y._pos)/z);y._$thumb.stop(true,true).animate({left:A},y._duration,y._easing)})};p.prototype.initIndexes=function(){var A=Math.ceil(this._numItems/this._numDisplay);var z="";for(var y=0;y<A;y++){var x=y*this._numDisplay;var w=Math.min(x+this._numDisplay,this._numItems);z+="<span class='index' title='"+((x+1)+"-"+w)+"'></span>"}this._$cbar.prepend(z);this._$indexes=this._$cbar.find(".index").mousedown(h).bind("click",{elem:this},this.goToIndex);this._$scroller.bind(g,{elem:this},this.updateIndexes)};p.prototype.updateIndexes=function(y){var x=y.data.elem;var w=Math.ceil(x._prevSlots/x._numDisplay);x._$indexes.filter(".index-hl").removeClass("index-hl");x._$indexes.eq(w).addClass("index-hl")};p.prototype.updateSlideList=function(){var w=this;this._pos=-this._prevSlots*this._unitSize;this._$slideList.stop(true,true).animate({left:this._pos},this._duration,this._easing,function(){w._$scroller.trigger(j)});this.updateCPanel();if(this._playOnce){this.pauseLast()}};p.prototype.updateCPanel=function(){this._$scroller.trigger(v).trigger(q).trigger(g)};p.prototype.trackClick=function(x){var w=x.data.elem;w.autoStop((x.pageX-w._$scrollbar.offset().left)/w._$scrollbar.width())};p.prototype.autoStop=function(z){if(z!=this._prevPct){this._prevPct=z;var w;var x=z*this._range;if(x>Math.abs(this._pos)){w=Math.ceil(x/this._unitSize)}else{if(x<Math.abs(this._pos)){w=Math.floor(x/this._unitSize)}else{return}}var y=w+(this._pos/this._unitSize);this._prevSlots+=y;this._nextSlots-=y;this.updateSlideList()}};p.prototype.goToIndex=function(x){var w=x.data.elem;w.stopTimer();w._prevSlots=c(this).index()*w._numDisplay;w._nextSlots=w._maxSlots-w._prevSlots;w.updateSlideList();return false};p.prototype.moveBack=function(y){var x=(typeof y!="undefined")?y.data.elem:this;x.stopTimer();if(x._nextSlots<x._maxSlots){var w=x._moveBy1?1:Math.min(x._maxSlots-x._nextSlots,x._numDisplay);x._nextSlots+=w;x._prevSlots-=w}else{if(x._contNav){x._nextSlots=0;x._prevSlots=x._maxSlots}else{return}}x.updateSlideList()};p.prototype.moveFwd=function(y){var x=(typeof y!="undefined")?y.data.elem:this;x.stopTimer();if(x._prevSlots<x._maxSlots){var w=x._moveBy1?1:Math.min(x._maxSlots-x._prevSlots,x._numDisplay);x._prevSlots+=w;x._nextSlots-=w}else{if(x._contNav){x._prevSlots=0;x._nextSlots=x._maxSlots}else{return}}x.updateSlideList()};p.prototype.processLoadedImg=function(w){w.data.elem.processImg(c(this))};p.prototype.processImg=function(w){if(this._autoScale&&w.width()>0&&w.height()>0){var x=w.height()/w.width();w.css({width:this._slideWidth,height:x*this._slideWidth});if(w.height()>this._slideHeight){w.css({width:(1/x)*this._slideHeight,height:this._slideHeight})}}w.css({left:Math.round((this._slideWidth-w.width())/2),top:this._extOffset+Math.round((this._slideHeight-w.height())/2)})};p.prototype.onBlur=function(x){var w=x.data.elem;w._$scroller.unbind(j).unbind("mouseenter").unbind("mouseleave");w.stopTimer()};p.prototype.onFocus=function(x){var w=x.data.elem;if(w._autoScroll){w._$scroller.bind(j,{elem:w},w.startTimer).bind("mouseenter",{elem:w},w.scrollerOver).bind("mouseleave",{elem:w},w.scrollerOut).trigger(j)}};p.prototype.itemMouseover=function(w){c(this).find("img:first").stop().animate({opacity:u},m)};p.prototype.itemMouseout=function(x){var w=x.data.elem;c(this).find("img:first").stop().animate({opacity:1},m,function(){if(jQuery.browser.msie){this.style.removeAttribute("filter")}})};p.prototype.slideInCaption=function(x){var w=x.data.elem;var y=c(this).find(">p:first");y.stop().animate({top:w._captionAlign==i?w._slideHeight-y.outerHeight():0},m)};p.prototype.slideOutCaption=function(x){var w=x.data.elem;var y=c(this).find(">p:first");y.stop().animate({top:w._captionAlign==i?w._slideHeight:-y.outerHeight()},m)};p.prototype.fadeInCaption=function(w){c(this).find(">p:first").stop(true).animate({opacity:1},m)};p.prototype.fadeOutCaption=function(w){c(this).find(">p:first").stop(true).animate({opacity:0},m)};p.prototype.showCaption=function(){c(this).find(">p:first").css("visibility","visible")};p.prototype.hideCaption=function(){c(this).find(">p:first").css("visibility","hidden")};p.prototype.scrollerOver=function(x){var w=x.data.elem;w._$scroller.unbind(j);w.stopTimer()};p.prototype.scrollerOut=function(x){var w=x.data.elem;w._$scroller.bind(j,{elem:w},w.startTimer).trigger(j)};p.prototype.shuffleItems=function(){var y=this._$slides.toArray();for(var z=0;z<this._numItems;z++){var w=Math.floor(Math.random()*this._numItems);var x=y[z];y[z]=y[w];y[w]=x}for(var z=0;z<this._numItems;z++){this._$slideList.append(c(y[z]))}this._$slides=this._$slideList.find(">li")};p.prototype.startTimer=function(x){var w=x.data.elem;if(w._timerId==null){w._timerId=setTimeout(function(){w.stopTimer();if(w._prevSlots<w._maxSlots){var y=w._moveBy1?1:Math.min(w._maxSlots-w._prevSlots,w._numDisplay);w._prevSlots+=y;w._nextSlots-=y}else{w._prevSlots=0;w._nextSlots=w._maxSlots}w.updateSlideList()},w._delay)}};p.prototype.stopTimer=function(){clearTimeout(this._timerId);this._timerId=null};p.prototype.pauseLast=function(w){if(this._prevSlots==this._maxSlots){this._autoScroll=false;this._$scroller.unbind(j).unbind("mouseenter").unbind("mouseleave");this.stopTimer()}};p.prototype.scrollContent=function(x){var w=x.data.elem;if(!w._$slideList.is(":animated")){var y=(typeof x.originalEvent.wheelDelta=="undefined")?-x.originalEvent.detail:x.originalEvent.wheelDelta;y>0?w.moveBack():w.moveFwd()}return false};p.prototype.touchStart=function(w){w.data.elem._slideCoord.start=w.originalEvent.touches[0].pageX};p.prototype.touchMove=function(w){w.preventDefault();w.data.elem._slideCoord.end=w.originalEvent.touches[0].pageX};p.prototype.touchEnd=function(x){var w=x.data.elem;if(w._slideCoord.end>=0){if(Math.abs(w._slideCoord.start-w._slideCoord.end)>e){if(w._slideCoord.end<w._slideCoord.start){w.moveFwd()}else{w.moveBack()}}}w._slideCoord.start=w._slideCoord.end=-1};function h(){return false}function b(w,x){if(!isNaN(w)&&w>0){return w}return x}function s(w,x){if(!isNaN(w)&&w>=0){return w}return x}c.fn.wtScroller=function(y){var x={num_display:3,slide_width:300,slide_height:200,slide_margin:1,button_width:35,ctrl_height:20,margin:10,auto_scroll:true,delay:k,scroll_speed:n,easing:"",auto_scale:true,move_one:false,ctrl_type:"scrollbar",display_buttons:true,mouseover_buttons:false,display_caption:true,mouseover_caption:false,caption_align:i,caption_position:f,cont_nav:true,shuffle:false,mousewheel_scroll:false,play_once:false,caption_effect:"slide"};var w=c.extend(true,{},x,y);return this.each(function(){var z=new p(c(this),w)})}})(jQuery);